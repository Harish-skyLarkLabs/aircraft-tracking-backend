# LiveKit Ingress Configuration
# Documentation: https://docs.livekit.io/realtime/ingress/overview/

# LiveKit server connection
api_key: devkey
api_secret: secret
ws_url: ws://localhost:7880

# Redis configuration (required for ingress)
redis:
  address: localhost:6380

# Logging configuration
logging:
  level: info

# CPU cost configuration for transcoding
cpu_cost:
  rtmp_cpu_cost: 2.0
  whip_cpu_cost: 2.0
  url_cpu_cost: 2.0
  whip_bypass_transcoding_cpu_cost: 0.5

# Health check server
health_port: 8085

# Prometheus metrics (optional)
# prometheus_port: 9090

# RTSP/RTMP input configuration
rtmp_port: 1935

# Service configuration
# num_instances: 1

# FFmpeg configuration for RTSP ingestion
# These settings optimize for low-latency streaming
ffmpeg:
  # Input options for RTSP streams
  input_options:
    - -rtsp_transport
    - tcp
    - -fflags
    - nobuffer
    - -flags
    - low_delay
    - -analyzeduration
    - "1000000"
    - -probesize
    - "1000000"
  
  # Output encoding options
  video_options:
    - -c:v
    - libx264
    - -preset
    - ultrafast
    - -tune
    - zerolatency
    - -profile:v
    - baseline
    - -level
    - "3.1"
    - -b:v
    - 2000k
    - -maxrate
    - 2500k
    - -bufsize
    - 1000k
    - -g
    - "30"
    - -keyint_min
    - "30"
  
  audio_options:
    - -c:a
    - aac
    - -b:a
    - 128k
    - -ar
    - "44100"

